(function(){"use strict";var e={197:function(e,t,n){var o=n(5102),s=n(9269),a=n(3201);function l(e,t,n,l,r,i){const c=(0,s.up)("menu-bar"),d=(0,s.up)("annotation-sidebar"),u=(0,s.up)("q-drawer"),p=(0,s.up)("start-page"),m=(0,s.up)("annotation-page"),h=(0,s.up)("review-page"),g=(0,s.up)("q-page-container"),k=(0,s.up)("q-layout"),y=(0,s.up)("drag-n-drop-overlay"),f=(0,s.up)("exit-dialog");return(0,s.wg)(),(0,s.iD)("div",{class:"fullscreen",onDragover:t[4]||(t[4]=(0,o.iM)(((...e)=>i.onDragEnter&&i.onDragEnter(...e)),["prevent"])),onDragenter:t[5]||(t[5]=(...e)=>i.onDragEnter&&i.onDragEnter(...e)),onDragleave:t[6]||(t[6]=(0,o.iM)(((...e)=>i.onDragLeave&&i.onDragLeave(...e)),["self"])),onDrop:t[7]||(t[7]=(0,o.iM)(((...e)=>i.onDrop&&i.onDrop(...e)),["stop","prevent"])),style:{"overflow-y":"scroll"}},[(0,s._)("div",{style:(0,a.j5)({"pointer-events":r.overlayActive?"none":"auto"})},[(0,s.Wm)(k,{view:"hHh lpR fFf"},{default:(0,s.w5)((()=>["start"!==e.currentPage?((0,s.wg)(),(0,s.j4)(c,{key:0})):(0,s.kq)("",!0),(0,s.Wm)(u,{"model-value":"start"!==e.currentPage,bordered:"",class:(0,a.C_)(e.$q.dark.isActive?"bg-dark":"bg-grey-2")},{default:(0,s.w5)((()=>[(0,s.Wm)(d)])),_:1},8,["model-value","class"]),(0,s.Wm)(g,null,{default:(0,s.w5)((()=>["start"===e.currentPage?((0,s.wg)(),(0,s.j4)(p,{key:0,onTextFileLoaded:t[0]||(t[0]=e=>i.switchToPage("annotate")),onJsonFileLoaded:t[1]||(t[1]=e=>i.switchToPage("review"))})):(0,s.kq)("",!0),"annotate"===e.currentPage?((0,s.wg)(),(0,s.j4)(m,{key:1})):(0,s.kq)("",!0),"review"===e.currentPage?((0,s.wg)(),(0,s.j4)(h,{key:2})):(0,s.kq)("",!0)])),_:1})])),_:1}),(0,s.Wm)(y,{style:(0,a.j5)({visibility:r.overlayActive&&null==r.pendingFileDrop?"visible":"hidden"})},null,8,["style"]),(0,s.Wm)(f,{show:null!=r.pendingFileDrop&&"start"!=e.currentPage,onHide:t[2]||(t[2]=e=>r.pendingFileDrop=null),onConfirm:t[3]||(t[3]=e=>i.processFileDrop())},null,8,["show"])],4)],32)}var r="data:image/png;base64,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";const i={class:"q-pa-sm q-pl-md row items-center"},c=(0,s._)("img",{src:r},null,-1),d=(0,s._)("span",{class:"q-ml-sm"},[(0,s._)("strong",null," NER Annotator ")],-1),u={class:"q-ml-sm"},p={key:0,style:{color:"rgb(207, 255, 207)"}},m={key:1,style:{color:"rgb(255, 255, 128)"}},h={key:2,style:{color:"rgb(207, 255, 207)"}},g={class:"q-ml-md cursor-pointer non-selectable"},k=(0,s._)("span",null," File ",-1),y={class:"q-ml-md cursor-pointer non-selectable"},f=(0,s._)("span",null," Annotations ",-1),w={class:"q-ml-md cursor-pointer non-selectable"},b=(0,s._)("span",null," Tags ",-1),v={class:"q-ml-md cursor-pointer non-selectable"},S=(0,s._)("span",null,"Help",-1),C=(0,s._)("div",{class:"text-h6"},"Project Name",-1);function A(e,t,n,a,l,r){const A=(0,s.up)("q-avatar"),x=(0,s.up)("q-item-section"),_=(0,s.up)("q-item"),q=(0,s.up)("q-list"),T=(0,s.up)("q-menu"),D=(0,s.up)("export-annotations"),B=(0,s.up)("q-space"),W=(0,s.up)("q-icon"),U=(0,s.up)("q-separator"),Z=(0,s.up)("about-dialog"),E=(0,s.up)("q-header"),P=(0,s.up)("q-card-section"),I=(0,s.up)("q-input"),O=(0,s.up)("q-btn"),N=(0,s.up)("q-card-actions"),R=(0,s.up)("q-card"),j=(0,s.up)("q-dialog"),H=(0,s.up)("exit-dialog"),L=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(E,{bordered:""},{default:(0,s.w5)((()=>[(0,s._)("div",i,[(0,s._)("div",null,[(0,s.Wm)(A,{size:"xs"},{default:(0,s.w5)((()=>[c])),_:1}),d]),(0,s._)("div",null,[(0,s._)("span",u,["annotate"===e.$store.state.currentPage?((0,s.wg)(),(0,s.iD)("strong",p," | Annotation Mode | ")):"review"===e.$store.state.currentPage?((0,s.wg)(),(0,s.iD)("strong",m," | Review Mode | ")):((0,s.wg)(),(0,s.iD)("strong",h," | ISSUE WITH MENU BAR AND CURENT PAGE | "))])]),(0,s._)("div",g,[k,(0,s.Wm)(T,{style:{"border-radius":"0.5rem"}},{default:(0,s.w5)((()=>[(0,s.Wm)(q,{dense:"",style:{"min-width":"100px"}},{default:(0,s.w5)((()=>[(0,s.wy)(((0,s.wg)(),(0,s.j4)(_,{clickable:"",onClick:t[1]||(t[1]=t=>e.pendingClick=e.$refs.file)},{default:(0,s.w5)((()=>[(0,s.Wm)(x,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Open File")])),_:1}),(0,s._)("input",{onChange:t[0]||(t[0]=(...e)=>r.openFile&&r.openFile(...e)),type:"file",ref:"file",accept:".txt",style:{display:"none"}},null,544)])),_:1})),[[L]])])),_:1})])),_:1})]),(0,s._)("div",y,[f,(0,s.Wm)(T,{style:{"border-radius":"0.5rem"}},{default:(0,s.w5)((()=>[(0,s.Wm)(q,{dense:"",style:{"min-width":"100px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(D),(0,s.wy)(((0,s.wg)(),(0,s.j4)(_,{clickable:"",onClick:t[3]||(t[3]=t=>e.pendingClick=e.$refs.file)},{default:(0,s.w5)((()=>[(0,s.Wm)(x,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Import")])),_:1}),(0,s._)("input",{onChange:t[2]||(t[2]=(...e)=>r.importAnnotations&&r.importAnnotations(...e)),type:"file",ref:"file",accept:".json",style:{display:"none"}},null,544)])),_:1})),[[L]])])),_:1})])),_:1})]),(0,s._)("div",w,[b,(0,s.Wm)(T,{style:{"border-radius":"0.5rem"}},{default:(0,s.w5)((()=>[(0,s.Wm)(q,{dense:"",style:{"min-width":"100px"}},{default:(0,s.w5)((()=>[(0,s.wy)(((0,s.wg)(),(0,s.j4)(_,{clickable:"",onClick:t[4]||(t[4]=e=>r.exportTags())},{default:(0,s.w5)((()=>[(0,s.Wm)(x,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Export")])),_:1})])),_:1})),[[L]]),(0,s.wy)(((0,s.wg)(),(0,s.j4)(_,{clickable:"",onClick:t[6]||(t[6]=t=>e.$refs.file.click())},{default:(0,s.w5)((()=>[(0,s.Wm)(x,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Import")])),_:1}),(0,s._)("input",{onChange:t[5]||(t[5]=(...e)=>r.importTags&&r.importTags(...e)),type:"file",ref:"file",accept:".json",style:{display:"none"}},null,544)])),_:1})),[[L]])])),_:1})])),_:1})]),(0,s.Wm)(B),(0,s.Wm)(W,{style:{"margin-top":"5px"},color:"white",name:e.$q.dark.isActive?"fas fa-sun":"fas fa-moon",class:"cursor-pointer",onClick:r.toggleDarkMode},null,8,["name","onClick"]),(0,s._)("div",v,[S,(0,s.Wm)(T,{style:{"border-radius":"0.5rem"}},{default:(0,s.w5)((()=>[(0,s.Wm)(q,{dense:"",style:{"min-width":"100px"}},{default:(0,s.w5)((()=>[(0,s.wy)(((0,s.wg)(),(0,s.j4)(_,{clickable:"",href:"https://github.com/tecoholic/ner-annotator/discussions",target:"_blank"},{default:(0,s.w5)((()=>[(0,s.Wm)(x,null,{default:(0,s.w5)((()=>[(0,s.Uk)(" Forum ")])),_:1})])),_:1})),[[L]]),(0,s.wy)(((0,s.wg)(),(0,s.j4)(_,{clickable:"",href:"https://github.com/tecoholic/ner-annotator/issues",target:"_blank"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Report Issue ")])),_:1})),[[L]]),(0,s.Wm)(U),(0,s.wy)(((0,s.wg)(),(0,s.j4)(_,{clickable:"",onClick:t[7]||(t[7]=t=>e.showAbout=!0)},{default:(0,s.w5)((()=>[(0,s.Wm)(x,null,{default:(0,s.w5)((()=>[(0,s.Uk)("About")])),_:1})])),_:1})),[[L]])])),_:1})])),_:1}),(0,s.Wm)(Z,{show:e.showAbout,onHide:t[8]||(t[8]=t=>e.showAbout=!1)},null,8,["show"])])])])),_:1}),(0,s.Wm)(j,{modelValue:e.promptForProject,"onUpdate:modelValue":t[11]||(t[11]=t=>e.promptForProject=t),persistent:""},{default:(0,s.w5)((()=>[(0,s.Wm)(R,{style:{"min-width":"350px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(P,null,{default:(0,s.w5)((()=>[C])),_:1}),(0,s.Wm)(P,{class:"q-pt-none"},{default:(0,s.w5)((()=>[(0,s.Wm)(I,{dense:"",modelValue:e.newProjectName,"onUpdate:modelValue":t[9]||(t[9]=t=>e.newProjectName=t),autofocus:"",onKeyup:t[10]||(t[10]=(0,o.D2)((t=>e.promptForProject=!1),["enter"]))},null,8,["modelValue"])])),_:1}),(0,s.Wm)(N,{align:"right",class:"text-primary"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(O,{flat:"",label:"Cancel"},null,512),[[L]]),(0,s.wy)((0,s.Wm)(O,{flat:"",label:"Create Project"},null,512),[[L]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.Wm)(H,{show:null!=e.pendingClick,onHide:t[12]||(t[12]=t=>e.pendingClick=null),onConfirm:t[13]||(t[13]=t=>e.pendingClick.click())},null,8,["show"])],64)}function x(e,t,n,o,a,l){const r=(0,s.up)("q-item-section"),i=(0,s.up)("q-item"),c=(0,s.Q2)("close-popup");return(0,s.wy)(((0,s.wg)(),(0,s.j4)(i,{clickable:"",onClick:t[0]||(t[0]=e=>l.promptForNameAndExport())},{default:(0,s.w5)((()=>[(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Export")])),_:1})])),_:1})),[[c]])}n(4719);var _=n(6957),q=n(6526),T=n(5997),D=n(2225);const B=async(e,t)=>{if("undefined"===typeof window.rpc){let n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}else(0,q.a)({defaultPath:await(0,D.Kc)(),filters:[{extensions:["json"],name:"JSON Files (*.json)"},{name:"All files (*.*)",extensions:["*"]}]}).then((t=>{t&&(t.match(/.*\.json$/)||(t+=".json"),(0,T.dw)("save_file",{filepath:t,contents:e}).then((e=>alert(e))).catch((e=>alert(e))))})).catch((e=>console.log("Save cancelled.",e)))};var W={name:"ExportAnnotations",computed:{...(0,_.rn)(["annotations","classes"])},methods:{promptForNameAndExport(){const e=prompt("Please enter your name for the annotations export:");e?this.generateJSONExport(e):console.log("Export cancelled or name not provided.")},async generateJSONExport(e){const t={classes:this.classes.map(((e,t)=>({id:t+1,name:e.name,color:e.color}))),annotations:this.annotations.map((t=>[t.text,{entities:t.entities.map((t=>{let n=t[9]||[];const o=2===t[5]?"Rejected":1===t[5]?"Accepted":"Suggested",s=[o,(new Date).toISOString(),e,t[3]];return n.push(s),[t[1],t[2],n.map((e=>[e[0],e[1],e[2],e[3]]))]}))}]))},n=JSON.stringify(t,null,2);try{await B(n,`${e}-annotations.json`),console.log("Export successful")}catch(o){console.error("Export failed:",o)}}}},U=n(7617),Z=n(5246),E=n(2278),P=n(8819),I=n(1410),O=n.n(I);const N=(0,U.Z)(W,[["render",x]]);var R=N;O()(W,"components",{QItem:Z.Z,QItemSection:E.Z}),O()(W,"directives",{ClosePopup:P.Z});var j=n(5999);const H=(0,s._)("div",{class:"text-h6"},"NER Annotator",-1),L=(0,s._)("strong",null,"Version: ",-1),Q=(0,s._)("p",null,[(0,s._)("strong",null,"Source: "),(0,s._)("a",{href:"https://github.com/tecoholic/ner-annotator"}," Github Repository ")],-1),F=(0,s._)("p",null,[(0,s._)("strong",null,"Author:"),(0,s.Uk)(" @tecoholic ("),(0,s._)("a",{href:"https://github.com/tecoholic"},"Github"),(0,s.Uk)(", "),(0,s._)("a",{href:"https://github.com/tecoholic"},"Twitter"),(0,s.Uk)(") ")],-1);function z(e,t,n,o,l,r){const i=(0,s.up)("q-card-section"),c=(0,s.up)("q-btn"),d=(0,s.up)("q-card-actions"),u=(0,s.up)("q-card"),p=(0,s.up)("q-dialog"),m=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.j4)(p,{"model-value":n.show,onHide:t[0]||(t[0]=t=>e.$emit("hide"))},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{style:{"min-width":"400px",padding:"10px","border-radius":"10px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(i,null,{default:(0,s.w5)((()=>[H])),_:1}),(0,s.Wm)(i,{class:"q-pt-none"},{default:(0,s.w5)((()=>[(0,s._)("p",null,[L,(0,s.Uk)((0,a.zw)(e.version),1)]),Q,F])),_:1}),(0,s.Wm)(d,{align:"right"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(c,{flat:"",label:"OK",color:"primary"},null,512),[[m]])])),_:1})])),_:1})])),_:1},8,["model-value"])}var K={name:"AboutDialog",emits:["hide"],props:{show:{type:Boolean,default:!1}},data:function(){return{version:"1.3.0"}}},M=n(9833),G=n(8055),V=n(9501),Y=n(4333),$=n(4686);const J=(0,U.Z)(K,[["render",z]]);var X=J;O()(K,"components",{QDialog:M.Z,QCard:G.Z,QCardSection:V.Z,QCardActions:Y.Z,QBtn:$.Z}),O()(K,"directives",{ClosePopup:P.Z});const ee=(0,s._)("div",{class:"text-h5"},"Are you sure you want to close this file?",-1),te=(0,s._)("p",null,"All changes made to this file will be lost.",-1);function ne(e,t,n,o,a,l){const r=(0,s.up)("q-card-section"),i=(0,s.up)("q-btn"),c=(0,s.up)("q-card-actions"),d=(0,s.up)("q-card"),u=(0,s.up)("q-dialog"),p=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.j4)(u,{"model-value":n.show,onHide:t[2]||(t[2]=t=>e.$emit("hide"))},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{style:{"max-width":"400px",padding:"10px","border-radius":"10px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[ee])),_:1}),(0,s.Wm)(r,{class:"text-body1"},{default:(0,s.w5)((()=>[te,(0,s.Uk)(" If you haven't exported the annotations, please do so before closing the file. ")])),_:1}),(0,s.Wm)(c,{align:"right"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(i,{flat:"",label:"Cancel",color:"red",onClick:t[0]||(t[0]=t=>e.$emit("hide"))},null,512),[[p]]),(0,s.wy)((0,s.Wm)(i,{flat:"",label:"OK",color:"light-blue",onClick:t[1]||(t[1]=t=>e.$emit("confirm"))},null,512),[[p]])])),_:1})])),_:1})])),_:1},8,["model-value"])}var oe={name:"ExitDialog",emits:["hide","confirm"],props:{show:{type:Boolean,default:!1}}};const se=(0,U.Z)(oe,[["render",ne]]);var ae=se;O()(oe,"components",{QDialog:M.Z,QCard:G.Z,QCardSection:V.Z,QCardActions:Y.Z,QBtn:$.Z}),O()(oe,"directives",{ClosePopup:P.Z});var le={components:{ExportAnnotations:R,AboutDialog:X,ExitDialog:ae},name:"MenuBar",setup(){const e=(0,j.Z)();return{notify(t,n,o){e.notify({icon:t,message:n,color:o,position:"top",timeout:2e3,actions:[{label:"Dismiss",color:"white"}]})}}},data:function(){return{promptForProject:!1,newProjectName:"",showAbout:!1,pendingClick:null}},computed:{...(0,_.rn)(["annotations","classes"])},methods:{...(0,_.OI)(["loadClasses","loadAnnotations","setInputSentences","clearAllAnnotations","resetIndex"]),exportTags:async function(){await B(JSON.stringify(this.classes),"tags.json")},importTags:function(e){let t=e.target.files[0],n=new FileReader;n.onload=t=>{try{this.loadClasses(JSON.parse(t.target.result)),this.notify("fa fa-check",`${this.classes.length} Tags imported successfully`,"positive")}catch(e){this.notify("fas fa-exclamation-circle","Invalid file","red-6")}},n.readAsText(t)},openFile:function(e){let t=e.target.files[0],n=new FileReader;n.onload=e=>{this.setInputSentences(e.target.result),this.clearAllAnnotations()},n.readAsText(t),this.resetIndex()},importAnnotations:function(e){let t=e.target.files[0],n=new FileReader;n.onload=t=>{try{this.loadAnnotations(JSON.parse(t.target.result)),this.notify("fa fa-check","Annotations imported successfully","positive")}catch(e){this.notify("fas fa-exclamation-circle","Invalid file","red-6")}},n.readAsText(t)},toggleDarkMode:function(){this.$q.dark.toggle()}}},re=n(7454),ie=n(9393),ce=n(2952),de=n(2146),ue=n(3139),pe=n(4633),me=n(4492),he=n(6053);const ge=(0,U.Z)(le,[["render",A]]);var ke=ge;O()(le,"components",{QHeader:re.Z,QAvatar:ie.Z,QMenu:ce.Z,QList:de.Z,QItem:Z.Z,QItemSection:E.Z,QSpace:ue.Z,QIcon:pe.Z,QSeparator:me.Z,QDialog:M.Z,QCard:G.Z,QCardSection:V.Z,QInput:he.Z,QCardActions:Y.Z,QBtn:$.Z}),O()(le,"directives",{ClosePopup:P.Z});var ye=n.p+"img/step-1.4f5d4ae3.png",fe=n.p+"img/step-2.ada325d3.png",we=n.p+"img/step-3.7e65646c.png";const be={class:"q-mx-auto q-my-xl",style:{"max-width":"600px"}},ve=(0,s._)("h5",{class:"text-h4 q-mb-sm"},"NER Text Annotator",-1),Se={class:"q-my-xl q-py-md",style:{"margin-top":"7rem"}},Ce={class:"q-mx-auto",style:{"max-width":"600px"}},Ae=(0,s._)("h4",{class:"text-h4"}," How do I use the NER Annotator? ",-1),xe=(0,s._)("p",{class:"text-subtitle1 q-my-md"},"Tips to prepare the text file",-1),_e=(0,s._)("ul",null,[(0,s._)("li",null,"Break your content in paragraphs or passages"),(0,s._)("li",null,[(0,s.Uk)(" Maintain a consistent seperator between the passages. "),(0,s._)("br"),(0,s.Uk)(" Eg., newline, empty line or a text seperator like "),(0,s._)("code",null,"---")]),(0,s._)("li",null," For large datasets, break the text into smaller files and tag them seperately ")],-1),qe=(0,s._)("ul",{class:"q-my-md"},[(0,s._)("li",null,[(0,s.Uk)("Use the "),(0,s._)("strong",null,"New Tag"),(0,s.Uk)(" button to create new tags")]),(0,s._)("li",null,[(0,s.Uk)(" Use the "),(0,s._)("strong",null,"Edit Tag"),(0,s.Uk)(" button to remove unwanted tags ")]),(0,s._)("li",null,[(0,s.Uk)(" Click the "),(0,s._)("strong",null,"Save"),(0,s.Uk)(" button once you are done annotating an entry and to move to the next one ")]),(0,s._)("li",null,[(0,s.Uk)(" Adjust the "),(0,s._)("strong",null,"Text Seperator"),(0,s.Uk)(" break your content correctly into entries ")]),(0,s._)("li",null,[(0,s.Uk)(" Use the "),(0,s._)("strong",null,"Tags"),(0,s.Uk)(" menu to Export/Import tags to share with your team ")])],-1);function Te(e,t,n,o,l,r){const i=(0,s.up)("q-icon"),c=(0,s.up)("q-file"),d=(0,s.up)("q-separator"),u=(0,s.up)("q-img"),p=(0,s.up)("q-timeline-entry"),m=(0,s.up)("q-timeline");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(i,{name:e.$q.dark.isActive?"fas fa-sun":"fas fa-moon",class:(0,a.C_)([e.$q.dark.isActive?"text-white":"text-black","cursor-pointer fixed-top-right q-mx-xl q-my-lg text-h5"]),onClick:r.toggleDarkMode},null,8,["name","class","onClick"]),(0,s._)("div",be,[ve,(0,s._)("p",{class:(0,a.C_)(["text-subtitle1",e.$q.dark.isActive?"text-grey-4":"text-grey-7"])}," Annotate text for spaCy NER Model training ",2),(0,s._)("div",Se,[(0,s.Wm)(c,{modelValue:l.textFile,"onUpdate:modelValue":[t[0]||(t[0]=e=>l.textFile=e),r.onFileSelected],accept:".txt,.json",onRejected:r.fileSelectionError,filled:"",label:"Open a text or json file to begin","bg-color":e.$q.dark.isActive?"black-1":"light-blue-1"},{prepend:(0,s.w5)((()=>[(0,s.Wm)(i,{name:"fas fa-upload"})])),_:1},8,["modelValue","onRejected","onUpdate:modelValue","bg-color"]),(0,s._)("p",{class:(0,a.C_)(["text-subtitle1 q-my-md",e.$q.dark.isActive?"text-grey-4":"text-grey-7"])}," Hint: You can also drag and drop files into this window! ",2)])]),(0,s.Wm)(d),(0,s._)("div",{class:(0,a.C_)([e.$q.dark.isActive?"bg-dark":"bg-grey-1","q-pa-lg"])},[(0,s._)("div",Ce,[Ae,(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[(0,s.Wm)(p,{subtitle:"Step 1",title:"Load your text file with contents to annotate",icon:"fa fa-upload",color:"yellow-8"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{src:ye,"spinner-color":"white",class:"rounded-borders",style:{border:"1px solid #ccc",width:"80%"}}),xe,_e])),_:1}),(0,s.Wm)(p,{subtitle:"Step 2",title:"Create some tags and start tagging your text",icon:"fa fa-tag",color:"orange-6"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{src:fe,"spinner-color":"white",class:"rounded-borders",style:{border:"1px solid #ccc"}}),qe])),_:1}),(0,s.Wm)(p,{subtitle:"Step 3",title:"Download your annotations as a JSON file that can be used for training",icon:"fa fa-download",color:"red-6"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{src:we,"spinner-color":"white",class:"rounded-borders",style:{border:"1px solid #ccc",width:"70%"}})])),_:1}),(0,s.Wm)(p,{subtitle:"Finally",title:"Convert to DocBin format and use it for training",icon:"fa fa-file",color:"red-10"},{default:(0,s.w5)((()=>[(0,s._)("p",null,[(0,s.Uk)(" See the spaCy documentation "),(0,s._)("a",{class:(0,a.C_)(e.$q.dark.isActive?"text-light-blue-4":"text-dark-blue"),href:"https://spacy.io/api/data-formats#json-input"}," here ",2),(0,s.Uk)(" on how to convert the annotations from JSON to DocBin format. ")])])),_:1})])),_:1})])],2)],64)}var De={name:"StartPage",emits:["text-file-loaded","json-file-loaded"],data(){return{textFile:null}},methods:{...(0,_.OI)(["setInputSentences"]),onFileSelected(e){let t=e.name.split(".").pop();try{let n=new FileReader;n.readAsText(e),n.addEventListener("load",(e=>{this.setInputSentences(e.target.result),"txt"===t?this.$emit("text-file-loaded"):"json"===t?(console.log("Emitting json-file-loaded"),this.$emit("json-file-loaded")):alert("Please upload either a .txt or a .json file.")}))}catch(n){console.log("Catch reached"),this.fileSelectionError()}},fileSelectionError(){this.$q.notify({icon:"fas fa-exclamation-circle",message:"Invalid file",color:"red-6",position:"top",timeout:2e3,actions:[{label:"Dismiss",color:"white"}]})},toggleDarkMode(){this.$q.dark.toggle()}}},Be=n(6967),We=n(8173),Ue=n(3884),Ze=n(4711);const Ee=(0,U.Z)(De,[["render",Te]]);var Pe=Ee;O()(De,"components",{QIcon:pe.Z,QFile:Be.Z,QSeparator:me.Z,QTimeline:We.Z,QTimelineEntry:Ue.Z,QImg:Ze.Z});const Ie={class:"q-pa-lg",style:{height:"60vh","overflow-y":"scroll"}},Oe={class:"q-pa-md",style:{"border-top":"1px solid #ccc"}},Ne={class:"q-pa-md",style:{"border-top":"1px solid #ccc"}};function Re(e,t,n,o,a,l){const r=(0,s.up)("classes-block"),i=(0,s.up)("q-btn");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(r),(0,s._)("div",Ie,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.tm.tokens,(e=>((0,s.wg)(),(0,s.j4)((0,s.LL)("token"===e.type?"Token":"TokenBlock"),{key:e.start,token:e,backgroundColor:e.backgroundColor,humanOpinion:e.humanOpinion,onRemoveBlock:l.onRemoveBlock,onReplaceBlockLabel:l.onReplaceBlockLabel},null,40,["token","backgroundColor","humanOpinion","onRemoveBlock","onReplaceBlockLabel"])))),128))]),(0,s._)("div",Oe,[(0,s.Wm)(i,{class:"q-mx-sm",color:"primary",outline:"",title:"Undo",onClick:l.undo,label:"Undo"},null,8,["onClick"])]),(0,s._)("div",Ne,[(0,s.Wm)(i,{color:"red",outline:"",class:"q-mx-sm",title:"Delete all annotations for all sentences/paragraphs",onClick:l.resetBlocks,label:"Reset"},null,8,["onClick"]),(0,s.Wm)(i,{class:"q-mx-sm",color:e.$q.dark.isActive?"grey-3":"grey-9",outline:"",title:"Go back one sentence/paragraph",onClick:l.backOneSentence,disabled:0==e.currentIndex,label:"Back"},null,8,["color","onClick","disabled"]),(0,s.Wm)(i,{class:"q-mx-sm",color:e.$q.dark.isActive?"grey-3":"grey-9",outline:"",title:"Go forward one sentence/paragraph",onClick:l.skipCurrentSentence,label:"Skip"},null,8,["color","onClick"]),(0,s.Wm)(i,{class:"q-mx-sm",color:"green-7",outline:"",title:"Go forward one sentence/paragraph",onClick:l.saveTags,label:"Save"},null,8,["onClick"])])])}const je=["id"];function He(e,t,n,o,l,r){return"token"===n.token.type?((0,s.wg)(),(0,s.iD)("span",{key:0,id:"t"+n.token.start,class:"token",style:(0,a.j5)({padding:"char"==this.$store.state.annotationPrecision?"0.25rem 0rem":"0.25rem"})},(0,a.zw)(" "==n.token.text?"Â ":n.token.text),13,je)):(0,s.kq)("",!0)}var Le={name:"Token",props:{token:{type:Object,required:!0}}};const Qe=(0,U.Z)(Le,[["render",He]]);var Fe=Qe;const ze={class:"tag"};function Ke(e,t,n,l,r,i){const c=(0,s.up)("Token"),d=(0,s.up)("q-btn");return(0,s.wg)(),(0,s.iD)("mark",{class:(0,a.C_)(["bg-"+n.backgroundColor,{"shadow-unreviewed":!r.userHasToggled,"bg-red":!n.token.humanOpinion}])},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.token.tokens,(e=>((0,s.wg)(),(0,s.j4)(c,{key:e.start,token:e},null,8,["token"])))),128)),(0,s._)("span",ze,["review"===this.currentPage?((0,s.wg)(),(0,s.iD)("i",{key:0,class:(0,a.C_)(i.symbolClass),onClick:t[0]||(t[0]=(...e)=>i.toggleSymbol&&i.toggleSymbol(...e))},null,2)):(0,s.kq)("",!0),(0,s.Uk)(" "+(0,a.zw)(n.token.label)+" ",1),(0,s.Wm)(d,{icon:"fa fa-exchange-alt",round:"",flat:"",size:"xs","text-color":"grey-7",title:"Change label to currently selected label",onClick:t[1]||(t[1]=e=>i.recordActionAndEmit("replace-block-label",n.token.start))}),(0,s.Wm)(d,{icon:"fa fa-times-circle",round:"",flat:"",size:"xs","text-color":"grey-7",title:"Delete annotation",onClick:t[2]||(t[2]=(0,o.iM)((e=>i.recordActionAndEmit("remove-block",n.token.start)),["stop"]))}),"review"===this.currentPage?((0,s.wg)(),(0,s.j4)(d,{key:1,icon:i.reviewedIconClass,round:"",flat:"",size:"xs","text-color":"grey-9",title:"Dark indicates that you have reviewed this annotation, light means you have not.",onClick:(0,o.iM)(i.toggleReviewed,["stop"])},null,8,["icon","onClick"])):(0,s.kq)("",!0)])],2)}var Me={name:"TokenBlock",components:{Token:Fe},props:{token:Object,backgroundColor:String,humanOpinion:Boolean,isSymbolActive:{type:Number,default:0}},data(){return{userHasToggled:!1,suggestedState:!1,isReviewed:!1}},computed:{...(0,_.rn)(["currentPage"]),symbolClass(){switch(this.isSymbolActive){case 0:return"fas fa-hourglass-start fa-lg";case 1:return"fas fa-thumbs-up fa-lg";case 2:return"fas fa-skull-crossbones fa-lg";default:return"fas fa-question-circle fa-lg"}},reviewedIconClass(){return this.userHasToggled?"fas fa-toggle-on":"fas fa-toggle-off"}},methods:{toggleSymbol(){this.recordAction("symbol-state",this.isSymbolActive);let e=(this.isSymbolActive+1)%3;this.userHasToggled=!0,this.$emit("update-symbol-state",{tokenStart:this.token.start,newSymbolState:e})},toggleReviewed(){this.recordAction("review-state",this.isReviewed),this.isReviewed=!this.isReviewed,this.userHasToggled=!0},recordAction(e,t){const n={type:e,tokenStart:this.token.start,previousState:t,newState:this["symbol-state"===e?"isSymbolActive":"isReviewed"],timestamp:Date.now()};this.$emit("record-undo",n)},recordActionAndEmit(e,t){this.recordAction(e,this.token),this.$emit(e,t)}}};const Ge=(0,U.Z)(Me,[["render",Ke]]);var Ve=Ge;O()(Me,"components",{QBtn:$.Z});const Ye={class:"q-pa-md",style:{"border-bottom":"1px solid #ccc"}},$e={class:"row"},Je={class:"tags"},Xe={class:"q-mx-md"},et={class:"buttons"};function tt(e,t,n,o,l,r){const i=(0,s.up)("q-avatar"),c=(0,s.up)("q-chip"),d=(0,s.up)("q-space"),u=(0,s.up)("q-btn"),p=(0,s.up)("q-input");return(0,s.wg)(),(0,s.iD)("div",Ye,[(0,s._)("div",$e,[(0,s._)("div",Je,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.classes,((t,n)=>((0,s.wg)(),(0,s.j4)(c,{key:t.id,outline:"",square:"",style:{height:"2rem"},color:t.color.replace("11","12"),clickable:"",onClick:t=>e.setCurrentClass(n),removable:l.showDeleteButtons,onRemove:e=>r.handleRemoveClass(t.id,t.name)},{default:(0,s.w5)((()=>[t.id===e.currentClass.id?((0,s.wg)(),(0,s.j4)(i,{key:0,color:t.color.replace("11","12"),style:{height:"2rem"},"text-color":"white",icon:"fa fa-check"},null,8,["color"])):(0,s.kq)("",!0),t.id!==e.currentClass.id?((0,s.wg)(),(0,s.j4)(i,{key:1,color:t.color.replace("11","12"),style:{height:"2rem"},"text-color":"white","font-size":"16px"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(n+1),1)])),_:2},1032,["color"])):(0,s.kq)("",!0),(0,s._)("p",{class:(0,a.C_)(["q-mb-none",e.$q.dark.isActive?"text-grey-3":"text-grey-9"])},(0,a.zw)(t.name),3)])),_:2},1032,["color","onClick","removable","onRemove"])))),128))]),(0,s.Wm)(d),(0,s._)("div",Xe,[l.showNewClassInput||0===e.classes.length?((0,s.wg)(),(0,s.j4)(p,{key:0,"bottom-slots":"",modelValue:l.newClassName,"onUpdate:modelValue":t[1]||(t[1]=e=>l.newClassName=e),hint:"Enter a NER Tag and click [+] to add it",dense:"",autofocus:""},{append:(0,s.w5)((()=>[(0,s.Wm)(u,{round:"",dense:"",flat:"",color:"green-4",icon:"fa fa-plus",onClick:r.saveNewClass},null,8,["onClick"]),(0,s.Wm)(u,{round:"",color:"red-4",dense:"",flat:"",icon:"fa fa-times",onClick:t[0]||(t[0]=e=>l.showNewClassInput=!1)})])),_:1},8,["modelValue"])):(0,s.kq)("",!0)]),(0,s._)("div",et,[(0,s.Wm)(u,{outline:"",onClick:t[2]||(t[2]=e=>l.showNewClassInput=!0),label:"New Tag",class:"q-mr-sm",color:e.$q.dark.isActive?"grey-3":"grey-9"},null,8,["color"]),(0,s.Wm)(u,{outline:"",onClick:t[3]||(t[3]=e=>l.showDeleteButtons=!l.showDeleteButtons),label:l.showDeleteButtons?"Lock Tags":"Edit Tags",color:e.$q.dark.isActive?"grey-3":"grey-9"},null,8,["label","color"])])])])}var nt={name:"ClassesBlock",data(){return{showNewClassInput:!1,newClassName:"",showDeleteButtons:!1}},computed:{...(0,_.rn)(["classes","currentClass","enableKeyboardShortcuts"])},created(){document.addEventListener("keydown",this.keypress)},watch:{newClassName(e,t){e!=t&&(this.newClassName=e.toUpperCase())}},methods:{...(0,_.OI)(["setCurrentClass"]),...(0,_.nv)(["createNewClass","deleteClass"]),keypress(e){if(this.enableKeyboardShortcuts){var t=parseInt(e.key);t&&(t>this.classes.length||this.setCurrentClass(t-1))}},handleRemoveClass(e,t){let n=confirm("Are you sure you want to remove the tag `"+t+"`?\nNOTE: This will NOT affect previously tagged entities.");n&&this.deleteClass(e)},saveNewClass(){if(!this.newClassName)return;const e=this;this.createNewClass(this.newClassName).then((()=>{e.showNewClassInput=!1,e.newClassName=""}))},onInputKeyup(e){"Enter"===e.key&&this.saveNewClass()}}},ot=n(1384);const st=(0,U.Z)(nt,[["render",tt],["__scopeId","data-v-807769c4"]]);var at=st;O()(nt,"components",{QChip:ot.Z,QAvatar:ie.Z,QSpace:ue.Z,QInput:he.Z,QBtn:$.Z});class lt{constructor(e){this.classes=e,this.tokens=[]}getTokenByStart(e){return this.tokens.find((t=>t.start===e))}setTokensAndAnnotation(e,t){if(this.tokens=e.map((e=>({type:"token",start:e[0],end:e[1],text:e[2],humanOpinion:!0,isSymbolActive:0}))),this.words=e.map((e=>e[2])),void 0!=t)for(let l=0;l<t.entities.length;l++){var n=t.entities[l][0],o=t.entities[l][1],s=t.entities[l][3];console.log("ENTITYNAME: ",s,t.entities[l]);var a=this.classes.find((e=>e.name.toUpperCase()===s.toUpperCase()));console.log("SETTOKENENTITYCLSAS: ",a),a||(a={name:s}),this.addNewBlock(n,o,a,!0)}}addNewBlock(e,t,n,o,s=!1,a,l="name",r="suggested",i,c=!0,d=0){let u={type:"token-block",annotationHistory:i,start:e,end:t,name:l,label:n.name,humanOpinion:!0,initiallyNLP:s,userHasToggled:c,isSymbolActive:d,isSuggested:!1,isLoaded:a,status:r,tokens:this.tokens.filter((n=>n.start>=e&&n.end<=t)),backgroundColor:n.color||null},p=[],m=[],h=t<e?t:e,g=t>e?t:e;for(let y=0;y<this.tokens.length;y++){let e=this.tokens[y];if(e.end<h)m.push(e);else if(e.end>h&&e.start<g)if("token-block"==e.type)if(e.label.toUpperCase()==n.name.toUpperCase())p.push(...e.tokens);else{let t=[],o=[],s=e.tokens;for(let e=0;e<s.length;e++){let n=s[e];n.end<=h?t.push(n):n.end>h&&n.start<g?p.push(n):n.start>=g&&o.push(n)}k(t,e,m),k(p,n,m,!0),k(o,e,m),p=[]}else"token"==e.type&&p.push(e);else e.start>=g&&p.length?(k(p,n,m,!0),p=[],m.push(e)):m.push(e)}function k(e,t,n,o=!1){if(e.length){let c={type:"token-block",start:e[0].start,end:e[e.length-1].end,name:l,tokens:e,humanOpinion:!0,label:t.name,classId:t.id||0,backgroundColor:t.color||null,initiallyNLP:!!o&&s,userHasToggled:!0,isSymbolActive:d,isLoaded:a,status:r,annotationHistory:i};n.push(c)}}p.length&&(m.push(u),k(p,n,m,!0)),this.tokens=m}removeBlock(e){let t=[];for(let n=0;n<this.tokens.length;n++)"token-block"===this.tokens[n].type&&this.tokens[n].start===e?t.push(...this.tokens[n].tokens):t.push(this.tokens[n]);this.tokens=t}resetBlocks(){let e=[];for(let t=0;t<this.tokens.length;t++)"token"===this.tokens[t].type?e.push(this.tokens[t]):e.push(...this.tokens[t].tokens);this.tokens=e}updateSymbolState(e,t){const n=this.tokens.find((t=>"token-block"===t.type&&t.start===e));n&&(n.isSymbolActive=t,n.userHasToggled=!0)}exportAsAnnotation(){let e=[];for(let t=0;t<this.tokens.length;t++)if("token-block"===this.tokens[t].type){let n=this.tokens[t];console.log("export As annotations this is ",n),e.push([n.name,n.start,n.end,n.label,n.initiallyNLP,n.isSymbolActive,n.userHasToggled,n.isLoaded,n.status,n.annotationHistory])}return e}getBlockByStart(e){for(let t=0;t<this.tokens.length;t++){const n=this.tokens[t];if("token-block"===n.type&&n.start===e)return n}return console.log("Error, Unable to get block by start in token-manager.js"),null}}var rt=lt,it=n(459),ct=n.n(it),dt={name:"AnnotationPage",data:function(){return{tm:new rt([]),currentSentence:{},redone:"",tokenizer:new(ct()),addedTokensStack:[]}},components:{Token:Fe,TokenBlock:Ve,ClassesBlock:at},computed:{...(0,_.rn)(["annotations","annotationHistory","classes","currentClass","currentIndex","inputSentences","enableKeyboardShortcuts","annotationPrecision"])},watch:{inputSentences(){this.resetIndex(),this.tokenizeCurrentSentence()},annotations(){this.currentAnnotation!=this.annotations[this.currentIndex]&&this.tokenizeCurrentSentence()},classes(){this.tokenizeCurrentSentence()},annotationPrecision(){this.tokenizeCurrentSentence()}},created(){this.inputSentences.length&&this.tokenizeCurrentSentence(),document.addEventListener("mouseup",this.selectTokens),document.addEventListener("keydown",this.keypress)},beforeUnmount(){document.removeEventListener("mouseup",this.selectTokens),document.removeEventListener("keydown",this.keypress)},methods:{...(0,_.OI)(["nextSentence","previousSentence","resetIndex"]),keypress(e){this.enableKeyboardShortcuts&&(32==e.keyCode?this.saveTags():39==e.keyCode?this.skipCurrentSentence():37==e.keyCode?this.backOneSentence():82!=e.keyCode&&27!=e.keyCode||this.resetBlocks(),e.stopPropagation())},undo(){console.log("Undo Stack:",this.addedTokensStack)},applyAnnotationHistory(){const e=this.annotationHistory;e&&e.length>0&&(e.forEach((e=>{const[t,n,o,,s,,a]=e,l="nlp"!==s,r=this.classes.find((e=>e.name===t));r?this.tm.addNewBlock(n,o,r,l,a,!0,s,status):console.warn(`Label "${t}" not found in classes.`)})),this.tm.tokens.forEach((t=>{if("token-block"===t.type){const n=e.some((e=>{const[,n,o,,s]=e;return"nlp"===s&&t.start===n&&t.end===o}));t.humanOpinion=!n}})))},tokenizeCurrentSentence(){let e,t;if(this.currentSentence=this.inputSentences[this.currentIndex],this.currentAnnotation=this.annotations[this.currentIndex],"char"==this.$store.state.annotationPrecision){e=this.currentSentence.text.split(""),t=[];for(let e=0;e<this.currentSentence.text.length;e++)t.push([e,e+1])}else e=this.tokenizer.tokenize(this.currentSentence.text),t=this.tokenizer.span_tokenize(this.currentSentence.text);let n=e.map(((e,n)=>[t[n][0],t[n][1],e]));this.tm=new rt(this.classes),this.tm.setTokensAndAnnotation(n,this.currentAnnotation),this.applyAnnotationHistory()},selectTokens(){let e=document.getSelection();if(e.anchorOffset===e.focusOffset&&e.anchorNode===e.focusNode)return;const t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);let o,s;try{o=parseInt(t.startContainer.parentElement.id.replace("t",""));let e=parseInt(n.endContainer.parentElement.id.replace("t",""));s=e+n.endOffset}catch{return void console.log("selected text were not tokens")}if(!this.classes.length&&e.anchorNode)return alert("There are no Tags available. Kindly add some Tags before tagging."),void e.empty();console.log("adding manual block ",o,s,this.currentClass),this.tm.addNewBlock(o,s,this.currentClass,!0,!1),this.addedTokensStack.push(o),e.empty()},onRemoveBlock(e){this.tm.removeBlock(e)},onReplaceBlockLabel(e){const t=this.tm.getBlockByStart(e),n=t.start,o=t.end;this.tm.removeBlock(e),void 0!==n&&void 0!==o&&(this.addedTokensStack.push(n),this.tm.addNewBlock(n,o,this.currentClass))},resetBlocks(){this.tm.resetBlocks(),this.addedTokensStack=[]},skipCurrentSentence(){this.nextSentence(),this.tokenizeCurrentSentence()},backOneSentence(){this.previousSentence(),this.tokenizeCurrentSentence()},saveTags(){this.$store.commit("addAnnotation",{text:this.currentSentence.text,entities:this.tm.exportAsAnnotation()}),this.nextSentence(),this.tokenizeCurrentSentence()}}};const ut=(0,U.Z)(dt,[["render",Re]]);var pt=ut;O()(dt,"components",{QBtn:$.Z});const mt={class:"q-pa-lg",style:{height:"60vh","overflow-y":"scroll"}},ht={class:"q-pa-md",style:{"border-top":"1px solid #ccc"}},gt={class:"q-pa-md",style:{"border-top":"1px solid #ccc"}};function kt(e,t,n,o,l,r){const i=(0,s.up)("classes-block"),c=(0,s.up)("q-btn");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(i),(0,s._)("div",mt,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.tm.tokens,(e=>((0,s.wg)(),(0,s.j4)((0,s.LL)("token"===e.type?"Token":"TokenBlock"),{key:`${e.type}-${e.start}`,token:e,class:(0,a.C_)([e.userHasToggled?"user-active":"user-inactive"]),isSymbolActive:e.isSymbolActive,backgroundColor:e.backgroundColor,humanOpinion:e.humanOpinion,onUpdateSymbolState:t=>r.handleSymbolUpdate(e.start,t.newSymbolState,t.userHasToggled),onRemoveBlock:r.onRemoveBlock,onReplaceBlockLabel:r.onReplaceBlockLabel},null,40,["token","class","isSymbolActive","backgroundColor","humanOpinion","onUpdateSymbolState","onRemoveBlock","onReplaceBlockLabel"])))),128))]),(0,s._)("div",ht,[(0,s.Wm)(c,{class:"q-mx-sm",color:"primary",outline:"",title:"Undo",onClick:r.undo,label:"Undo"},null,8,["onClick"])]),(0,s._)("div",gt,[(0,s.Wm)(c,{color:"red",outline:"",class:"q-mx-sm",title:"Delete all annotations for all sentences/paragraphs",onClick:r.resetBlocks,label:"Reset"},null,8,["onClick"]),(0,s.Wm)(c,{class:"q-mx-sm",color:e.$q.dark.isActive?"grey-3":"grey-9",outline:"",title:"Go back one sentence/paragraph",onClick:r.backOneSentence,disabled:0==e.currentIndex,label:"Back"},null,8,["color","onClick","disabled"]),(0,s.Wm)(c,{class:"q-mx-sm",color:e.$q.dark.isActive?"grey-3":"grey-9",outline:"",title:"Go forward one sentence/paragraph",onClick:r.skipCurrentSentence,label:"Skip"},null,8,["color","onClick"]),(0,s.Wm)(c,{class:"q-mx-sm",color:"green-7",outline:"",title:"Go forward one sentence/paragraph",onClick:r.saveTags,label:"Save"},null,8,["onClick"])])])}var yt={name:"ReviewPage",data:function(){return{tm:new rt([]),currentSentence:{},redone:"",tokenizer:new(ct()),addedTokensStack:[],undoStack:[]}},components:{Token:Fe,TokenBlock:Ve,ClassesBlock:at},computed:{...(0,_.rn)(["annotations","annotationHistory","classes","currentClass","currentIndex","inputSentences","enableKeyboardShortcuts","annotationPrecision"])},watch:{inputSentences(){this.resetIndex(),this.tokenizeCurrentSentence()},annotations(){this.currentAnnotation!=this.annotations[this.currentIndex]&&this.tokenizeCurrentSentence()},classes(){this.tokenizeCurrentSentence()},annotationPrecision(){this.tokenizeCurrentSentence()}},created(){this.inputSentences.length&&this.tokenizeCurrentSentence(),document.addEventListener("mouseup",this.selectTokens),document.addEventListener("keydown",this.keypress)},beforeUnmount(){document.removeEventListener("mouseup",this.selectTokens),document.removeEventListener("keydown",this.keypress)},methods:{...(0,_.OI)(["nextSentence","previousSentence","resetIndex"]),keypress(e){this.enableKeyboardShortcuts&&(32==e.keyCode?this.saveTags():39==e.keyCode?this.skipCurrentSentence():37==e.keyCode?this.backOneSentence():82!=e.keyCode&&27!=e.keyCode||this.resetBlocks(),e.stopPropagation())},recordAction(e){console.log("Recording action:",e),this.undoStack.push(e),this.undoStack.sort(((e,t)=>t.timestamp-e.timestamp))},handleSymbolUpdate(e,t,n){const o=this.tm.getTokenByStart(e);if(!o)return void console.error("No token found for start:",e);const s=o.isSymbolActive,a=o.userHasToggled;this.tm.updateSymbolState(e,t),o.userHasToggled=n,this.recordAction({type:"symbolUpdate",details:{tokenStart:e,oldSymbolState:s,newSymbolState:t,oldUserHasToggled:a,newUserHasToggled:n,timestamp:Date.now()}}),console.log("Updated symbol state and user toggled status:",e,t,n)},onAddBlock(e,t,n,o,s=!1,a,l="name",r="suggested",i,c=!1,d=0){console.log("Adding block:",e,t,n),this.recordAction({type:"addBlock",details:{start:e,end:t,_class:n,humanOpinion:o,initiallyNLP:s,isLoaded:a,name:l,status:r,annotationHistory:i,userHasToggled:c,isSymbolActive:d,timestamp:Date.now()}}),this.tm.addNewBlock(e,t,n,o,s,a,l,r,i,c,d)},revertAddBlock(e){this.tm.removeBlock(e.start,e.end,e._class)},onRemoveBlock(e){const t=this.tm.getBlockByStart(e);if(!t)return void console.error("Block not found for start:",e);const n={start:t.start,end:t.end,_class:t.label,humanOpinion:t.humanOpinion,initiallyNLP:t.initiallyNLP,isLoaded:t.isLoaded,name:t.name,status:t.status,annotationHistory:t.annotationHistory,userHasToggled:t.userHasToggled,isSymbolActive:t.isSymbolActive};this.recordAction({type:"blockRemove",details:{tokenStart:t.start,blockDetails:n,timestamp:Date.now()}}),console.log("Removing block with details:",n),this.tm.removeBlock(e)},undo(){if(this.undoStack.length>0){const e=this.undoStack.pop();switch(console.log("LAST ACTION BEFORE UNDO ",e),e.type){case"symbolUpdate":this.revertSymbolUpdate(e.details);break;case"blockRemove":this.revertBlockRemove(e.details);break;case"addBlock":this.revertAddBlock(e.details);break;default:console.log("Unhandled action type:",e.type)}}else console.log("Undo Stack is empty")},revertSymbolUpdate(e){this.tm.updateSymbolState(e.tokenStart,e.oldSymbolState);const t=this.tm.getTokenByStart(e.tokenStart);t&&(t.userHasToggled=e.oldUserHasToggled),console.log("Reverted symbol state and user toggled status for token:",e.tokenStart)},revertBlockAdd(e){this.tm.removeBlock(e.tokenStart)},revertBlockRemove(e){if(e&&e.blockDetails){if(console.log("Reverting with class details:",e.blockDetails._class),!e.blockDetails._class)return void console.error("Class details are missing");this.tm.addNewBlock(e.blockDetails.start,e.blockDetails.end,e.blockDetails._class,e.blockDetails.humanOpinion,e.blockDetails.initiallyNLP,e.blockDetails.isLoaded,e.blockDetails.name,e.blockDetails.status,e.blockDetails.annotationHistory,e.blockDetails.userHasToggled,e.blockDetails.isSymbolActive)}else console.error("Missing details for reverting block removal")},applyAnnotationHistory(){const e=this.annotationHistory;e&&e.length>0&&(e.forEach((e=>{const[t,n,o,,s,a,l,r]=e,i="nlp"!==s,c=l,d=this.classes.find((e=>e.name===t)),u=this.determineSymbolState(a);console.log("Added block with symbol ",u),d?this.tm.addNewBlock(n,o,d,i,c,!0,s,a,r,!1,u):console.warn(`Label "${t}" not found in classes.`)})),this.tm.tokens.forEach((t=>{if("token-block"===t.type){const n=e.some((e=>{const[,n,o,,s]=e;return"nlp"===s&&t.start===n&&t.end===o}));t.humanOpinion=!n}})))},determineSymbolState(e){switch(e){case"Accepted":return 1;case"Rejected":return 2;case"Suggested":return 0;default:return 0}},tokenizeCurrentSentence(){let e,t;if(this.currentSentence=this.inputSentences[this.currentIndex],this.currentAnnotation=this.annotations[this.currentIndex],"char"==this.$store.state.annotationPrecision){e=this.currentSentence.text.split(""),t=[];for(let e=0;e<this.currentSentence.text.length;e++)t.push([e,e+1])}else e=this.tokenizer.tokenize(this.currentSentence.text),t=this.tokenizer.span_tokenize(this.currentSentence.text);let n=e.map(((e,n)=>[t[n][0],t[n][1],e]));this.tm=new rt(this.classes),this.tm.setTokensAndAnnotation(n,this.currentAnnotation),this.applyAnnotationHistory()},selectTokens(){let e=document.getSelection();if(e.anchorOffset===e.focusOffset&&e.anchorNode===e.focusNode)return;const t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);let o,s;try{o=parseInt(t.startContainer.parentElement.id.replace("t",""));let e=parseInt(n.endContainer.parentElement.id.replace("t",""));s=e+n.endOffset}catch{return void console.log("selected text were not tokens")}if(!this.classes.length&&e.anchorNode)return alert("There are no Tags available. Kindly add some Tags before tagging."),void e.empty();console.log("adding manual block ",o,s,this.currentClass),this.tm.addNewBlock(o,s,this.currentClass,!0,!1,!1,"name","Suggested",null,!0),this.addedTokensStack.push(o),this.recordAction({type:"addBlock",details:{start:o,end:s,_class:this.currentClass,timestamp:Date.now()}}),e.empty()},onReplaceBlockLabel(e){const t=this.tm.getBlockByStart(e),n=t.start,o=t.end;this.tm.removeBlock(e),void 0!==n&&void 0!==o&&(this.addedTokensStack.push(n),this.tm.addNewBlock(n,o,this.currentClass))},resetBlocks(){this.tm.resetBlocks(),this.addedTokensStack=[]},skipCurrentSentence(){this.nextSentence(),this.tokenizeCurrentSentence()},backOneSentence(){this.previousSentence(),this.tokenizeCurrentSentence()},saveTags(){this.$store.commit("addAnnotation",{text:this.currentSentence.text,entities:this.tm.exportAsAnnotation()}),this.nextSentence(),this.tokenizeCurrentSentence()}}};const ft=(0,U.Z)(yt,[["render",kt]]);var wt=ft;O()(yt,"components",{QBtn:$.Z});const bt={class:"px-3"};function vt(e,t,n,o,a,l){const r=(0,s.up)("split-type-selector"),i=(0,s.up)("annotation-precision-selector"),c=(0,s.up)("progress-bar"),d=(0,s.up)("keyboard-shortcuts");return(0,s.wg)(),(0,s.iD)("nav",bt,[(0,s.Wm)(r,{class:"mt-4 mb-5"}),(0,s.Wm)(i,{class:"mt-4 mb-5"}),(0,s.Wm)(c,{class:"mb-5",completed:e.currentIndex,total:e.inputSentences.length},null,8,["completed","total"]),(0,s.Wm)(d)])}const St={class:"q-mx-md"},Ct={class:"is-size-6 q-mb-sm"};function At(e,t,n,o,l,r){const i=(0,s.up)("q-linear-progress");return(0,s.wg)(),(0,s.iD)("div",St,[(0,s._)("p",Ct,"Tagging Progress ("+(0,a.zw)(n.completed)+"/"+(0,a.zw)(n.total)+")",1),(0,s.Wm)(i,{rounded:"",size:"md",color:"primary",value:n.completed/n.total},null,8,["value"])])}var xt={name:"ProgressBar",props:{completed:{type:Number,required:!0,default:0},total:{type:Number,required:!0}},computed:{completedPercent(){return parseInt(this.completed/this.total*100)}}},_t=n(6353);const qt=(0,U.Z)(xt,[["render",At]]);var Tt=qt;O()(xt,"components",{QLinearProgress:_t.Z});const Dt={class:"q-pa-md"},Bt={key:0,class:"q-px-md"};function Wt(e,t,n,o,a,l){const r=(0,s.up)("q-select"),i=(0,s.up)("q-input");return(0,s.wg)(),(0,s.iD)("section",null,[(0,s._)("div",Dt,[(0,s.Wm)(r,{outlined:"","bg-color":e.$q.dark.isActive?"dark":"white",modelValue:l.splitType,"onUpdate:modelValue":t[0]||(t[0]=e=>l.splitType=e),options:a.splitOptions,"map-options":!0,label:"Text Seperator"},null,8,["bg-color","modelValue","options"])]),"custom"===l.splitType?((0,s.wg)(),(0,s.iD)("div",Bt,[(0,s.Wm)(i,{label:"Separator","bg-color":"white",outlined:"",modelValue:a.customSeparator,"onUpdate:modelValue":t[1]||(t[1]=e=>a.customSeparator=e),onChange:l.separatorChanged,disabled:e.annotations.length},null,8,["modelValue","onChange","disabled"])])):(0,s.kq)("",!0)])}var Ut={name:"SpitTypeSelector",data(){return{customSeparator:"---",splitOptions:[{label:"New Line",value:"newline"},{label:"An Empty Line",value:"emptyline"},{label:"Custom String",value:"custom"}]}},computed:{...(0,_.rn)(["annotations"]),splitType:{get(){switch(this.$store.state.separator){case"\n":return"newline";case"\n\n":return"emptyline";default:return"custom"}},set(e){switch(e.value){case"newline":this.$store.commit("setSeparator","\n");break;case"emptyline":this.$store.commit("setSeparator","\n\n");break;default:this.$store.commit("setSeparator","---");break}}}},methods:{separatorChanged(){this.$store.commit("setSeparator",this.customSeparator)}}},Zt=n(33);const Et=(0,U.Z)(Ut,[["render",Wt]]);var Pt=Et;O()(Ut,"components",{QSelect:Zt.Z,QInput:he.Z});const It={class:"q-px-md q-pb-md"};function Ot(e,t,n,o,a,l){const r=(0,s.up)("q-select");return(0,s.wg)(),(0,s.iD)("section",null,[(0,s._)("div",It,[(0,s.Wm)(r,{outlined:"","bg-color":e.$q.dark.isActive?"dark":"white",modelValue:l.precisionType,"onUpdate:modelValue":t[0]||(t[0]=e=>l.precisionType=e),options:a.precisionOptions,"map-options":!0,label:"Annotation Precision"},null,8,["bg-color","modelValue","options"])])])}var Nt={name:"AnnotationPrecisionSelector",data(){return{precisionOptions:[{label:"Word Level",value:"word"},{label:"Character Level",value:"char"}]}},computed:{precisionType:{get(){switch(this.$store.state.annotationPrecision){case"word":return"word";case"char":return"char";default:return"word"}},set(e){switch(e.value){case"word":this.$store.commit("setAnnotationPrecision","word");break;case"char":this.$store.commit("setAnnotationPrecision","char");break;default:this.$store.commit("setAnnotationPrecision","word");break}}}}};const Rt=(0,U.Z)(Nt,[["render",Ot]]);var jt=Rt;O()(Nt,"components",{QSelect:Zt.Z});const Ht=(0,s._)("br",null,null,-1),Lt=(0,s._)("div",{class:"column"},[(0,s._)("div",{class:"row",style:{height:"40px"}},[(0,s._)("div",{class:"col-4"},"Num Keys:"),(0,s._)("div",{class:"col"},"Change classes")]),(0,s._)("div",{class:"row",style:{height:"60px"}},[(0,s._)("div",{class:"col-4"},"Space Bar:"),(0,s._)("div",{class:"col"},"Save and move to the next sentence")]),(0,s._)("div",{class:"row",style:{height:"60px"}},[(0,s._)("div",{class:"col-4"},"Right Arrow:"),(0,s._)("div",{class:"col"},"Skip and move to the next sentence")]),(0,s._)("div",{class:"row",style:{height:"60px"}},[(0,s._)("div",{class:"col-4"},"Left Arrow:"),(0,s._)("div",{class:"col"},"Go back to the previous sentence")]),(0,s._)("div",{class:"row",style:{height:"60px"}},[(0,s._)("div",{class:"col-4"},"Escape:"),(0,s._)("div",{class:"col"},"Discard changes to the current sentence")])],-1);function Qt(e,t,n,o,a,l){const r=(0,s.up)("q-toggle"),i=(0,s.up)("q-icon"),c=(0,s.up)("q-card-section"),d=(0,s.up)("q-card"),u=(0,s.up)("q-dialog");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("section",null,[Ht,(0,s.Wm)(r,{modelValue:e.enableKeyboardShortcuts,"onUpdate:modelValue":t[0]||(t[0]=t=>e.enableKeyboardShortcuts=t),label:"Keyboard Shortcuts",onClick:l.enableKeyboardShortcutsChanged},null,8,["modelValue","onClick"]),(0,s.Wm)(i,{style:{"margin-left":"5px","margin-top":"3px"},color:e.$q.dark.isActive?"grey-4":"grey-10",name:"far fa-question-circle",onClick:t[1]||(t[1]=t=>e.showShortcutHelp=!0)},null,8,["color"])]),(0,s.Wm)(u,{"model-value":e.showShortcutHelp,onHide:t[2]||(t[2]=t=>e.showShortcutHelp=!1)},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{style:{"min-width":"100px",padding:"10px","border-radius":"10px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{class:"text-body1"},{default:(0,s.w5)((()=>[Lt])),_:1})])),_:1})])),_:1},8,["model-value"])],64)}var Ft={name:"KeyboardShortcuts",data:function(){return{enableKeyboardShortcuts:!1,showShortcutHelp:!1}},methods:{enableKeyboardShortcutsChanged(){this.$store.commit("setKeyboardShortcuts",this.enableKeyboardShortcuts)}}},zt=n(8299);const Kt=(0,U.Z)(Ft,[["render",Qt]]);var Mt=Kt;O()(Ft,"components",{QToggle:zt.Z,QIcon:pe.Z,QDialog:M.Z,QCard:G.Z,QCardSection:V.Z});var Gt={name:"AnnotationSidebar",components:{ProgressBar:Tt,SplitTypeSelector:Pt,AnnotationPrecisionSelector:jt,KeyboardShortcuts:Mt},computed:{...(0,_.rn)(["currentIndex","inputSentences"])}};const Vt=(0,U.Z)(Gt,[["render",vt]]);var Yt=Vt;const $t={class:"column items-center"},Jt={class:"text-h2 text-white"},Xt=(0,s._)("p",{class:"text-h3 text-white"}," Drop file to upload. ",-1);function en(e,t){const n=(0,s.up)("q-icon");return(0,s.wg)(),(0,s.iD)("div",{class:"fullscreen column justify-center bg-black",style:(0,a.j5)({opacity:"0.85"})},[(0,s._)("div",$t,[(0,s._)("p",Jt,[(0,s.Wm)(n,{name:"fas fa-upload"})]),Xt])],4)}const tn={},nn=(0,U.Z)(tn,[["render",en]]);var on=nn;O()(tn,"components",{QIcon:pe.Z});var sn={name:"LayoutDefault",setup(){const e=(0,j.Z)();return{notify(t,n,o){e.notify({icon:t,message:n,color:o,position:"top",timeout:2e3,actions:[{label:"Dismiss",color:"white"}]})}}},data(){return{overlayActive:!1,pendingFileDrop:null}},components:{MenuBar:ke,StartPage:Pe,AnnotationPage:pt,ReviewPage:wt,AnnotationSidebar:Yt,DragNDropOverlay:on,ExitDialog:ae},computed:{...(0,_.rn)(["annotations","classes","currentPage"])},methods:{...(0,_.OI)(["loadClasses","loadAnnotations","setInputSentences","clearAllAnnotations","resetIndex","setCurrentPage"]),switchToPage(e){console.log("Changing current page to",e),this.setCurrentPage(e),console.log("Current page is now",this.currentPage)},onDragEnter(){console.log("Here"),this.overlayActive=!0},onDragLeave(){this.overlayActive=!1},onDrop(e){console.log(e),this.overlayActive=!1,this.pendingFileDrop=e.dataTransfer.files[0],"start"==this.currentPage&&this.processFileDrop()},processFileDrop(){let e=this.pendingFileDrop.name.split(".").pop(),t=new FileReader;t.onload=t=>{let n=t.target.result;this.setInputSentences(n),this.clearAllAnnotations(),this.resetIndex(),"txt"===e?this.switchToPage("annotate"):"json"===e?this.switchToPage("review"):alert("Please upload either a .txt or a .json file.")},t.readAsText(this.pendingFileDrop),this.pendingFileDrop=null}}},an=n(2446),ln=n(2709),rn=n(6974);const cn=(0,U.Z)(sn,[["render",l]]);var dn=cn;O()(sn,"components",{QLayout:an.Z,QDrawer:ln.Z,QPageContainer:rn.Z});n(2374);var un=n(853);const pn=["red-11","blue-11","light-green-11","deep-orange-11","pink-11","light-blue-11","lime-11","brown-11","purple-11","cyan-11","yellow-11","grey-11","deep-purple-11","teal-11","amber-11","blue-grey-11","indigo-11","green-11","orange-11"],mn={setCurrentPage(e,t){e.currentPage=t},addToUndoStack(e,{undoAction:t,actionDescription:n}){e.undoStack.push({undoAction:t,actionDescription:n})},undoAction(e,t){t&&"string"===typeof t.type&&"function"===typeof this._mutations[t.type]&&this._mutations[t.type][0](e,t.payload)},undoLastAction(e){if(e.undoStack.length>0){const t=e.undoStack.pop();t.undoAction(),console.log(`Undid action: ${t.actionDescription}`)}else console.warn("Undo stack is empty.")},clearUndoStack(e){e.undoStack=[]},loadClasses(e,t){if(!Array.isArray(t))throw new Error("loadClasses: payload must be an array");let n=t.reduce(((e,t)=>e&&"object"===typeof t&&"id"in t&&"name"in t&&"color"in t),!0);if(!n)throw new Error("loadClasses: payload has invalid schema");e.classes=t,e.currentClass=e.classes[0],un.Z.set("tags",e.classes)},setInputSentences(e,t){try{let e;if("string"!==typeof t){if(t instanceof File){const o=new FileReader;return o.onload=function(t){try{const o=t.target.result;e={annotations:[[o,{entities:[]}]],classes:[]},n(e)}catch(o){console.error(`Error processing text file: ${o.message}`)}},void o.readAsText(t)}throw new Error("Invalid payload type")}try{e=JSON.parse(t)}catch(o){e={annotations:[[t,{entities:[]}]],classes:[]}}n(e)}catch(s){console.error(`Error processing payload: ${s.message}`)}function n(t){const n=t.annotations.map((([t,n],o)=>{let s=[];return console.log("help"),n.entities.forEach((e=>{if(e.length>=3){console.log("help");const n=e[0],o=e[1],a=e[2],l=a[a.length-1],r=a[0],i=l[3],c=l[2],d=l[0];var t=!1;"nlp"===r[2]&&(t=!0),console.log("label: ",i,"start: ",n,"end: ",o,"type: ",l,"name: ",c,"status: ",d),s.push([i,n,o,l,c,d,t,a]),console.log("Loaded annotation history:",a)}})),e.annotationHistory=s,console.log("Updated state.annotationHistory:",e.annotationHistory),{id:o,text:t}}));e.inputSentences=n,e.originalText=n.map((e=>e.text)).join(e.separator),t.classes&&Array.isArray(t.classes)&&mn.loadClasses(e,t.classes)}},addClass(e,t){const n=e.classes.find((e=>e.name===t));if(n)return void console.log("Class already exists, returning.");const o=e.classes.reduce(((e,t)=>t.id>e?t.id:e),0),s={id:o+1,name:t,color:pn[o%pn.length]};e.classes.some((e=>e.name===s.name))||(e.classes=[...e.classes,s],1===e.classes.length&&(e.currentClass=e.classes[0],console.log("Updated currentClass:",e.currentClass)))},removeClass(e,t){e.classes=e.classes.filter((e=>e.id!=t)),e.currentClass.id===t&&(e.currentClass=e.classes[0])},setCurrentClass(e,t){e.currentClass=e.classes[t]},addAnnotation(e,t){e.annotations[e.currentIndex]=t,e.currentAnnotation=t},clearAllAnnotations(e){e.annotations=[],e.currentAnnotation={}},setSeparator(e,t){e.separator=t;const n=e.originalText.split(e.separator);e.inputSentences=n.map(((e,t)=>({id:t,text:e})))},setAnnotationPrecision(e,t){e.annotationPrecision=t},setKeyboardShortcuts(e,t){e.enableKeyboardShortcuts=t},nextSentence(e){e.currentIndex<e.inputSentences.length-1?(e.currentIndex+=1,e.currentAnnotation=e.annotations[e.currentIndex]||{}):alert("You have completed all the sentences")},previousSentence(e){e.currentIndex>0?(e.currentIndex-=1,e.currentAnnotation=e.annotations[e.currentIndex]):alert("You are at the beginning of all sentences")},resetIndex(e){e.currentIndex=0},loadAnnotations(e,t){let n="object"===typeof t&&"annotations"in t&&"classes"in t;if(!n)throw new Error("loadAnnotations: payload has invalid schema");let o=t.annotations;if(!Array.isArray(o))throw new Error("loadAnnotations: payload must be an array");let s=[];for(var a=0;a<o.length;a++){if(null==o[a])continue;let e={text:o[a][0],entities:o[a][1].entities};s[a]=e}e.annotations=s,e.currentAnnotation=e.annotations[e.currentIndex]}},hn={},gn={createNewClass({commit:e,state:t},n){return new Promise(((o,s)=>{e("addClass",n);try{un.Z.set("tags",t.classes)}catch(a){s(a)}o()}))},deleteClass({commit:e,state:t},n){e("removeClass",n),un.Z.set("tags",t.classes)}};window.addEventListener("beforeunload",(async e=>{e.returnValue="Please make sure you export annotations before closing the file."}));var kn={state(){let e=un.Z.getItem("tags");return{annotations:[],annotationHistory:[],undoStack:[],classes:e||[],inputSentences:[],originalText:"",separator:"\n",enableKeyboardShortcuts:!1,annotationPrecision:"word",currentAnnotation:{},currentClass:e&&e[0]||{},currentIndex:0,currentSentence:"",currentPage:"start"}},getters:hn,mutations:mn,actions:gn},yn=n(8029),fn=n(4525),wn=n.n(fn),bn=n(9797),vn={config:{},plugins:{Notify:bn.Z},iconSet:wn()};const Sn=(0,o.ri)(dn).use(yn.Z,vn).use((0,_.MT)(kn));Sn.mount("#app")}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,o,s,a){if(!o){var l=1/0;for(d=0;d<e.length;d++){o=e[d][0],s=e[d][1],a=e[d][2];for(var r=!0,i=0;i<o.length;i++)(!1&a||l>=a)&&Object.keys(n.O).every((function(e){return n.O[e](o[i])}))?o.splice(i--,1):(r=!1,a<l&&(l=a));if(r){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[o,s,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.p="/ner-annotator/"}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var s,a,l=o[0],r=o[1],i=o[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(s in r)n.o(r,s)&&(n.m[s]=r[s]);if(i)var d=i(n)}for(t&&t(o);c<l.length;c++)a=l[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(d)},o=self["webpackChunkner_annotator"]=self["webpackChunkner_annotator"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(197)}));o=n.O(o)})();
//# sourceMappingURL=app.4a655ac9.js.map